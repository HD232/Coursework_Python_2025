# Movie Tracker API - Курсовая работа

## API сервис доступен по ссылке 
https://your-movie-tracker.onrender.com 


## Описание
API для учета просмотренных фильмов с рейтингами, отзывами и системой рекомендаций. Позволяет пользователям добавлять фильмы в свою коллекцию, оставлять отзывы и получать рекомендации на основе рейтингов других пользователей.


## Технологии
-Python 3.11+
-FastAPI
-SQLAlchemy (асинхронный)
-SQLite/PostgreSQL
-JWT для аутентификации
-Pydantic для валидации данных
-bcrypt для хеширования паролей


## Установка и запуск
-Клонировать репозиторий:
    git clone <ваш-репозиторий>
    cd movie-tracker
-Создать виртуальное окружение:
    python -m venv venv
-Установить зависимости:
    pip install -r requirements.txt
-Создать файл .env на основе .env.example:
    DATABASE_URL=sqlite+aiosqlite:///./movies.db
    SECRET_KEY=your_secret_key_here
    ALGORITHM=HS256
    ACCESS_TOKEN_EXPIRE_MINUTES=120
    ADMIN_USERNAME=admin
    ADMIN_PASSWORD=admin123
    ADMIN_EMAIL=admin@example.com
-Запустить сервер:
    uvicorn app.main:app --reload
    Открыть в браузере: http://localhost:8000
-При первом запуске автоматически создается администратор:
    Имя пользователя: admin
    Пароль: admin123
    Email: admin@example.com


## Документация API
Автоматическая документация доступна по адресам:
    Swagger UI: http://localhost:8000/docs
    ReDoc: http://localhost:8000/redoc


## Основные эндпоинты:
-Аутентификация
    POST /auth/register - регистрация пользователя
    POST /auth/login - вход в систему
    GET /auth/verify - проверка токена (требует токен)
-Фильмы (Movie) - CRUD операции
    GET /movies/ - список всех фильмов с фильтрацией
    GET /movies/{id} - фильм по ID
    POST /user/movies/ - создать фильм (требует токен)
    PUT /user/movies/{id} - обновить фильм (только свои фильмы)
    DELETE /user/movies/{id} - удалить фильм (только свои фильмы)
-Отзывы (Review)
    POST /reviews/ - оставить отзыв на фильм (требует токен)
    GET /reviews/ - список отзывов
    GET /movies/{id}/reviews - отзывы на конкретный фильм
    PUT /user/reviews/{id} - обновить отзыв (только свои отзывы)
    DELETE /user/reviews/{id} - удалить отзыв (только свои отзывы)
-Пользовательские эндпоинты
    GET /user/movies/ - фильмы текущего пользователя
    GET /user/reviews/ - отзывы текущего пользователя
    GET /user/reviews-with-details/ - отзывы пользователя с деталями о фильмах
    GET /recommendations/ - рекомендованные фильмы
-Администраторские эндпоинты
    GET /admin/reviews-with-details/ - все отзывы с деталями (только админ)
    DELETE /admin/reviews/{id} - удалить любой отзыв (только админ)
    GET /admin/movies/ - все фильмы (только админ)
    GET /admin/users/ - все пользователи (только админ)
-Веб-интерфейс
    / - главная страница
    /login-page - страница входа
    /register-page - страница регистрации
    /my-movies-page - личный кабинет с коллекцией фильмов
    /movies-page - каталог всех фильмов
    /my-reviews-page - мои отзывы
    /admin-panel - панель администратора (только для админов)


## Структура проекта
COURSEWORK PYTHON 2025/         # Корневая директория проекта
├── app/                        # Пакет приложения
│   ├── __pycache__/            # Кэш Python (не в репозитории)
│   ├── __init__.py             # Инициализация пакета
│   ├── auth.py                 # Аутентификация и JWT
│   ├── crud.py                 # CRUD операции с БД
│   ├── database.py             # Настройки базы данных
│   ├── main.py                 # Основное приложение FastAPI
│   ├── models.py               # Pydantic модели (схемы)
│   ├── routes.py               # Дополнительные роуты API
│   └── schemas.py              # SQLAlchemy модели (таблицы БД)
├── static/                     # Статические файлы
│   ├── uploads/                # Загруженные изображения фильмов
├── venv/                       # Виртуальное окружение Python (не в репозитории)
├── .env                        # Файл окружения с паролями (не в репозитории)
├── .env.example                # Пример файла окружения
├── .gitignore                  # Игнорируемые файлы Git
├── movies.db                   # Файл базы данных SQLite
├── README.md                   # Документация проекта
└── requirements.txt            # Зависимости Python


## Структура БД
-users - пользователи системы
-movies - фильмы с информацией о рейтинге, жанре, продолжительности
-reviews - отзывы пользователей на фильмы


## Особенности реализации
-Базовый функционал API
    Реализовано более 3 CRUD эндпоинтов для сущностей Movie, Review, User
    Поддержка методов GET, POST, PUT, DELETE
    Обработка ошибок (404, 422, 401, 403)
-Валидация данных
    Pydantic-схемы для всех входных и выходных данных
    Валидация типов данных, обязательных полей, диапазонов значений
    Аннотации типов для всех основных функций
-Документация
    Автоматическая документация через FastAPI
    Подробные описания эндпоинтов с summary/description
    README с полной инструкцией по запуску
-Структура проекта
    Логическое разделение на модули (auth, crud, routes, models, schemas)
    Чистый и читаемый код с соблюдением PEP8
    requirements.txt со всеми зависимостями
-Работа с базой данных
    Интеграция с SQLite через SQLAlchemy
    Асинхронные операции с БД
    Миграции через Alembic
-Аутентификация и авторизация
    JWT-аутентификация с токенами доступа
    Хеширование паролей с использованием bcrypt
    Защищенные эндпоинты с проверкой прав доступа
    Разделение прав пользователей и администраторо


## Автор
Студет группы ИВТ-201 Леоненков Данила Григорьевич